## 파일 시스템의 관리

### 파일 시스템의 개요와 종류
---
1. 개요
    - 운영체제가 파일을 시스템의 디스크상에 구성하는 방식
    - 컴퓨터에서 파일이나 자료를 쉽게 발견 및 접근할 수 있도록 보관 또는 조직하는 체계
    - 구성
        - Super Block
        - Group Descriptor Table
        - Block bitmap
        - inode

<br>

2. 종류
    - 리눅스 전용 디스크 기반 파일 시스템

|파일 시스템|설명|
|---|---|
|ext (ext1)|- 리눅스 초가애 사용되었던 파일 시스템이며 호환성이 없음|
|ext2|- ext 파일 시스템의 다음 버전|
|ext3|- ext2의 확장판|
|ext4|- ext3 및 ext3와 호환성이 있는 확장 버전|

<br>

- 
    - 저널링 파일 시스템
        - 시스템이 비정상적인 종료 시 저널(로그)을 이용해 빠르면서도 안정적인 복구가 가능하다.
        - 데이터를 디스크에 쓰기 전에 로그에 데이터를 남겨 시스템의 비정상적인 셧다운에도 로그를 사용해 빠르고 안정적인 복구 기능을 제공하는 기술

|파일 시스템|설명|
|---|---|
|JFS|- Journaling File System의 약자 <br> - IBM 사의 독자적인 저널링 파일 시스템|
|XFS|- eXtended File System의 약자 <br> - 고성능 저널링 시스템|
|ReiserFX|- 리눅스용 저널링 파일 시스템 중에서 가장 안정적이라고 평가를 받음|

<br>

- 
    - 네트워크 파일 시스템

|파일 시스템|설명|
|---|---|
|SMB|- 윈도우 계열 OS 환경에서 사용되는 파일/프린터 공유 프로토콜 <br> - 리눅스, 유닉스 OS와 윈도우 OS와의 자료 및 하드웨어 공유|
|CIFS|- Common internet File System <br> - SMB를 확장한 파일 시스템|
|NFS|- Newwork File System(네트워크 파일 시스템) <br> - 파일 공유 및 파일 서버로 사용됨|

<br>

- 
    - 기타 지원 가능한 파일 시스템

|파일 시스템|설명|
|---|---|
|FAT|- Windows NT가 지원하는 파일 시스템 중 가장 간단한 시스템|
|VFAT|- FAT 파일 시스템이 확장된 것으로 FAT와 호환 <br> FAT 보다 제한이 적음|
|FAT32|- 윈도우에서 사용하는 파일 시스템 <br> - 안정성이 뛰어나고 대용량 파일도 저장|
|ISO 9660|- CD-ROM의 표준 파일 시스템|
|UDF|- Universal Disk Format의 약자로 최신 파일 시스템 형식 <br> - 광학 매체용 파일 시스템 표준|

<br>
<br>

### 관련 명령어
---
1. mount, unmount
    - 마운트는 특정 디바이스를 특정 디렉터리처럼 사용하기 위해 장치와 디렉터리를 연결하는 것
    - 리눅스는 PnP(Plug and Play) 기능을 제공하나 지원하는 하드웨어가 많지 않음
    - 수동으로 마운트 언마운트를 시킨다.
```
mount[옵션][디바이스][디렉터리명]

-a : /etc/fstab 파일에 정의된 모든 시스템 마운트
-n : /etc/mtab 파일에 정보를 저장하지 않고 마운트
-f : 실제 마운트하는 것이 아니라 마운트가 가능한지 테스트

unmount[옵션][디바이스][디렉터리명]

-a : /etc/fstab 파일에 명시된 파일 시스템을 마운트 해제
-n : /etc/mtab 파일을 갱신하지 않고 마운트 해제
-f : 언마운트할 파일 시스템을 지정
```

<br>

2. eject
    - 이동식 보조기억장치 (DVD or CD-ROM) 등과 같은 미디어를 해제하고 장치를 제거하는 명령어
```
 eject[옵션][디바이스명]

 -r : 시디룸을 마운트 해제
 -f : 플로피를 마운트 해제
```

<br>

3. fdisk
    - 새로운 파티션의 생성, 기존 파티션의 삭제, 파티션의 타입 결정 등의 작업을 수행할 수 있다.
    - fdisk를 실행하기 위해서는 어떠한 디스크의 파티션을 나눌 것인지 알려 주어야 한다.
```
fdisk[옵션][장치명]

-v : fdisk 버전 정보 표시
-l : 현재 디스크의 파티션 테이블 정보 표시
-s : 지정된 파티션의 크기를 블록 단위로 표시
```

<br>

4. mkfs
    - fdisk로 하드디스크의 파티션을 나눈 후 해당 파티션에 맞는 파일 시스템을 생성한다.
```
mkfs [옵션] 장치이름

-v : 자세한 정보 보기
-t 파일 시스템 : 생성할 파일 시스템 타입 (ext2, ext3, ext4 등)을 지정
-c : 파일 시스템을 생성하기 전에 배드블록 목록 읽기
-v : 작업 상태와 결과를 자세히 보기
```
<br>

5. mke2fs
    - ext2, ext3, ext4 타입의 리눅스 파일 시스템을 생성(포맷)하는 명령어
```
mke2fs [옵션] 장치명
```

<br>

6. fsck
    - 파일 시스템의 무결성을 점검하고 대화식으로 복구하는 명령어
```
fsck [옵션] 장치명
```
|옵션|설명|
|---|---|
|-A|/etc/fstab에 표시된 모든 파일 시스템을 점검|
|-a|질의 없이 자동 복구|
|-r|질의 후 복구|
|-s|fsck 동작을 시리얼화, 대화형 모드에서 여러 파일 시스템 점검 시 유용|
|-t 파일 시스템|점검할 파일 시스템 유형 지정|

<br>

7. e2fsck
    - ext2, ext3, ext4 타입의 리눅스 파일 시스템을 점검 및 복구하는 명령어

8. du
    - Disk Usage의 약자로 디렉터리별로 디스크 사용량을 확인하는 명령어

9. df
    - 시스템에 마운트된 하드 디스크의 남은 용량을 확인할 때 사용하는 명령어

<br>
<br>

### 파일 /etc/fstab
---
1. 리눅스에서 사용하는 파일 시스템 정보를 정적으로(고정적으로) 저장하고 있는 파일
2. 리눅스 파일 시스템 정보와 부팅 시 마운트 정보를 가지고 있다.